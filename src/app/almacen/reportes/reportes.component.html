<div class="container">
    <div class="titulo">
        Reporte de inventario
    </div><br>
    <div class="card">
        <div class="card-content">
    
            <div class="columns">
                <div class="column is-2">
                    <div class="control">
                        <label class="radio">
                            <input type="radio" name="tipo" value="general" checked (change)="tipo($event.target.value)">
                            General
                        </label> <br>
                        <label class="radio">
                            <input type="radio" name="tipo" value="facturado" (change)="tipo($event.target.value)">
                            Facturado
                        </label>
                    </div>
                </div>
                <div class="column">
                    <div class="select">
                        <select name="" id="" [(ngModel)]="grupo">
                            <option value="#">Seleccione Grupo</option>
                            <option value="{{grupo._id}}" *ngFor="let grupo of grupos">{{grupo.nombre}}</option>
                        </select>
                    </div>
                </div>
            </div>
    
            <div class="columns">
                <div class="column is-2">
                    <div class="field">
                        <label class="label">Desde:</label>
                        <div class="control">
                            <input type="date" class="input is-small" #desde>
                        </div>
                    </div>
                </div>
                <div class="column is-2">
                    <div class="field">
                        <label class="label">Hasta:</label>
                        <div class="control">
                            <input type="date" class="input is-small" #hasta>
                        </div>
                    </div>
                </div>
                <div class="column is-2">
                    <div class="field">
                        <label for="" class="label">Â </label>
                        <div class="control">
                            <button class="button is-primary is-small" (click)="realizarBusqueda(desde.value, hasta.value)">
                                <span class="icon">
                                    <i class="fas fa-search"></i>
                                </span>
                                <span>
                                    Buscar
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<div class="card" *ngIf="cargando">
    <div class="card-content">
        <span class="load">Cargando...</span>
        <progress class="progress is-small is-success" max="100">1%</progress>
    </div>
    <!-- <div class="card-content">
        <div class="carga_">
            <div class="loader">
                <span style="--i:2"></span>
                <span style="--i:3"></span>
                <span style="--i:1"></span>
                <span style="--i:4"></span>
                <span style="--i:5"></span>
                <span style="--i:6"></span>
                <span style="--i:7"></span>
                <span style="--i:8"></span>
                <span style="--i:9"></span>
                <span style="--i:10"></span>
            </div>
            <span class="text">Cargando, esto puede tomar un tiempo.</span>
        </div>
    </div> -->
</div>

<div class="card" *ngIf="!cargando">
    <div class="card-content">
        <!-- <span class="subtitulo">Grupo</span><br> -->
        <span class="subtitulo">Desde: {{desde.value | date: 'dd/MM/yyyy': 'UTC'}} Hasta: {{hasta.value | date: 'dd/MM/yyyy': 'UTC'}}</span>
        <table class="table is-fullwidth">
            <tr>
                <th class="is-selected">Material</th>
                <th class="is-selected">Saldo inicial</th>
                <th class="is-selected">Entradas</th>
                <th class="is-selected">Salidas</th>
                <th class="is-selected">Devoluciones</th>
                <th class="is-selected">Saldo total</th>
            </tr>
            <tr *ngFor="let material of materiales;index as i">
                <td>{{material.nombre}} ({{material.marca}})
                    <ng-container *ngIf="grupo == '61f92a1f2126d717f004cca6'">
                        ({{material.ancho}}x{{material.largo}}) {{material.gramaje}}g, cal:{{material.calibre}}
                    </ng-container>
                </td>
                <td>
                    <ng-container *ngIf="saldos_iniciales[i] > 0">
                        {{puntoYcoma(saldos_iniciales[i])}} {{unidades[i]}}
                    </ng-container>
                    <ng-container *ngIf="saldos_iniciales[i] <= 0">
                        0 {{unidades[i]}}
                    </ng-container>
                </td>
                <td>{{puntoYcoma(material.cantidad)}} {{unidades[i]}}</td>
                <td>{{puntoYcoma(material.salida)}} {{unidades[i]}}</td>
                <td>{{puntoYcoma(material.devoluciones)}} {{unidades[i]}}</td>
                <td>
                    {{puntoYcoma(saldos_finales[i])}} {{unidades[i]}}
                </td>
            </tr>
        </table>
    </div>
</div>